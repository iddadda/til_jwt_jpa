<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gallery_jwt_jpa.order.OrderItemMapper">
<insert id="save">
    INSERT INTO order_items ( order_id, item_id)
    VALUES
    <foreach collection="itemIds" item="item" separator=",">
        (#{orderId}, #{item})
    </foreach>
</insert>

    <select id="findAllByOrderId">
        SELECT b.id, b.name, b.img_path, b.price, b.discount_per
        FROM order_items a JOIN items b
        ON a.item_id = b.id
        WHERE a.order_id = #{orderId}
    </select>
</mapper>